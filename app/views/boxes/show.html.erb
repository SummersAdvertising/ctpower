<link href="/css/faq.css" rel="stylesheet" type="text/css">


<article>
  <div class="banner">
    <div class="container">
      <h1>BES 常見問題</h1>
    </div>
  </div>
  <div id="crumb">
    <section class="container" >
      <ol class="breadcrumb">
        <li><%= link_to "首頁", root_path %></li>
        <li><%= link_to "客戶服務", FAQs_path() %></li>
        <li class="active">BES 常見問題</li>
      </ol>
    </section>
  </div>
  <section class="faq">
    <div class="container">
      <div id="faq01">
        <h1>BES 常見問題</h1>
        <img id="qMark" src="/images/img_common.png">
        <p>以「電動機車電池交換系統」為發展主軸，藉由快速電池交換方式，可媲美進而漸漸汰換高污染的汽油車，促進電動機車的普及率。 藉此改善及推廣人們綠能車輛的方便性，創造全新的綠色交通形態。 </p>
        
        <% @q = Faq.order(:box_id).search(params[:q]) %>
        <%= search_form_for @q, url: search_faqs_path, class: "form-inline quick-search-form" , method: :post  do |f| %>
            <div class="input-group">
              <%= f.search_field :question_cont, class: "form-control", placeholder: "Search here", required: true %>
            <span class="input-group-btn">
            <%= f.submit('搜 尋' , id: "quick-search", class: "btn") %>
            </span>
            </div>
         <% end %>

      </div>
      <div role="tabpanel" id="faq02"> <a name="faqs"></a>
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
        <%= render 'faqs/search_form'%>
        <% @boxes.each do |box| %>   
          <% if box.id == @box.id %>
            <li role="presentation" class="active">
          <% else %>
            <li role="presentation">
          <% end %>
            <%= link_to box.name, FAQ_path(box, anchor: "faqs") %>
              <!--<a href="#t01" aria-controls="home" role="tab" data-toggle="tab"><%= box.name %></a>-->
            </li>
        <% end %>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content">   
        <%= render 'faqs/search_form'%>

<% if @faqs %>
  <% @faqs.each do |faq| %>
  <div class="qaBlock">
  <div class="ques">
    <h3 class='faq_quickview' data-faq='<%= faq.id %>'><%= faq.question %> </h3>
  </div>
  <div class="answ">
    <p id='<%= "faqblock_#{faq.id}"%>'> 
    <%# render partial: 'faq_block', locals: {faq: faq} %>
    </p>
  </div>
  </div>    
  <% end %>
<% end %>
        </div>
      </div>
    </div>
  </section>
</article>







<script type="text/javascript">
  var tag = [];
  $('#faq02 .tab-content .qaBlock').each(function(i) {
    tag[i] = 0;
  });


  $('#faq02 .tab-content .qaBlock .answ').hide();
  $('#faq02 .tab-content .qaBlock').click(function(){
      var x = $(this).index('.qaBlock');
      
      faq_id = $(this).find(".faq_quickview").data("faq").toString();
      
      if ( $("#faqblock_"+faq_id).html().length <= 10 ){
        $.ajax({
          type: "GET",
          url: "/faqs/"+faq_id+"/fetch_by_box",
          data: { },
          success: function(data){
            return false   
          },
          error: function(data){
            return false  
          }
        });
      }

    if(tag[x] == 0){
      $(this).css({'border-color':'#f47979'});
      $(this).find('.answ').slideDown();
      $(this).find('.ques').addClass('open').css({color:'#f47979'});
      tag[x] = 1;
    }else{
      $(this).css({'border-color':'#a2a2a2'});
      $(this).find('.answ').slideUp();
      $(this).find('.ques').removeClass('open').css({color:'#000'});
      tag[x] = 0;
    }
    
    
  });

</script>
